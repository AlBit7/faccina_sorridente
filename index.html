<!DOCTYPE html>
<html>

<head>
    <title>faccina</title>

    <style>
        #body {
            margin: 0px;
            background-color: black;
            height: 100%;
        }

        #faccina_sorridente {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .viso {
            fill: none;
            stroke-width: 11px;
        }

        .viso,
        .occhio_sinistro,
        .occhio_destro,
        .bocca {
            stroke: #fff;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .occhio_sinistro:hover,
        .occhio_destro:hover,
        .bocca:hover,
        .viso:hover {
            cursor: pointer;
        }

        .occhio_sinistro,
        .occhio_destro,
        .bocca {
            fill: none;
            stroke-width: 8px;
        }
    </style>

</head>

<body id="body">
    <div id="faccina_sorridente">
        <svg width="342.9" height="342.9" viewBox="0 0 342.9 342.9">
            <g id="faccia">
                <circle id="viso" class="viso" cx="171.5" cy="171.5" r="166" />
                <path id="bocca" class="bocca" d="M557.1,433.2c8.6,5.8,22.5,9.6,38.2,9.6s29.5-3.8,38.1-9.6"
                    transform="translate(-423.8 -244)" />
                <line id="occhio_destro" class="occhio_destro" x1="186.2" y1="165.7" x2="186.2" y2="143" />
                <line id="occhio_sinistro" class="occhio_sinistro" x1="156.7" y1="165.7" x2="156.7" y2="143" />
            </g>
        </svg>
    </div>

    <script>

        const viso = document.getElementById("viso");
        const bocca = document.getElementById("bocca");
        const body = document.getElementById("body");

        var notte = 1;

        document.addEventListener('click', function (event) {

            switch (event.target.id) {
                case 'occhio_destro':
                case 'occhio_sinistro':

                    console.log('occhiolino');

                    const occhio = document.getElementById(event.target.id);

                    occhio.y1.baseVal.valueAsString = "165.7";
                    occhio.y2.baseVal.valueAsString = "143";

                    var id = null;
                    var tmp = -1;
                    var ritorna = false;
                    clearInterval(id);
                    var id = setInterval(animazioneOcchio, 20);
                    function animazioneOcchio() {
                        if (tmp == 0) {
                            clearInterval(id);
                        } else {
                            if (tmp == -12) {
                                ritorna = true;
                            }
                            if (ritorna) { tmp++; }
                            else { tmp--; }
                            occhio.y1.baseVal.value = 165.7 + tmp;
                            occhio.y2.baseVal.value = 143 - tmp;
                        }
                    }

                    break;

                case 'occhio_sinistro':

                    console.log('sinistro');
                    break;

                case 'viso':

                    console.log("viso --> cambio colore");

                    if (notte) {
                        body.style.backgroundColor = 'white';
                        occhio_destro.style.stroke = occhio_sinistro.style.stroke = bocca.style.stroke = viso.style.stroke = "black";
                        notte = 0;
                    } else {
                        body.style.backgroundColor = 'black';
                        occhio_destro.style.stroke = occhio_sinistro.style.stroke = bocca.style.stroke = viso.style.stroke = "white";
                        notte = 1;
                    }
                    break;

                case 'bocca':

                    console.log("bocca");

                    var id = null;
                    var tmp = -1;
                    var ritorna = false;
                    clearInterval(id);
                    var id = setInterval(animazioneBocca, 20);
                    function animazioneBocca() {
                        if (tmp == 0) {
                            clearInterval(id);
                        } else {
                            if (tmp == -22) {
                                ritorna = true;
                            }
                            if (ritorna) { tmp++; }
                            else { tmp--; }
                            bocca.transform.baseVal[0].matrix.f = -200 + tmp;
                            bocca.transform.baseVal[0].matrix.f = -244 - tmp;
                        }
                    }

                    break;

                default: break;
            }

        });

    </script>
</body>

</html>
